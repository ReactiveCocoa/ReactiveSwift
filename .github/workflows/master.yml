#on:
#  push:
#    branches:
#      - master

on: pull_request
name: Verification
jobs:
  carthage:
    runs-on: macos-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Recover cached dependencies
        uses: actions/cache@v1
        id: dependency-cache
        with:
          path: ~/Library/Caches/org.carthage.CarthageKit/SharedCache/
          key: 3-carthage-verification-${{ runner.os }}-${{ hashFiles('Cartfile.resolved') }}
      - name: Carthage verification
        run: |
          carthage checkout
          carthage build --cache-builds --no-skip-current

  swiftpm-macos:
    name: SwiftPM macOS
    runs-on: macos-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Pull dependencies
        run: |
          swift package resolve
      - name: Test via SwiftPM
        run: |
          swift --version
          swift build

  cocoapods:
    runs-on: macos-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: CocoaPods verification
        run: |
          pod repo update
          pod lib lint --use-libraries

